---
allowed-tools: >
  Bash(git branch:*),
  Bash(git checkout:*),
  Bash(git add:*),
  Bash(git commit:*),
  Bash(echo:*),
  Bash(mkdir:*),
  Bash(cat:*),
  Write(*),
  MultiEdit(*)
description: |
  Issue IDを指定して、実装指示に基づいた修正・実装を実施。
  テスト実行、コミットを含む
---

## 引数

$ARGUMENTS

## 実行手順 🤖

1. **引数検証と準備**

   - 第 1 引数で Issue ID を受け取り
   - 第 2 引数以降で追加の実装指示を受け取る
   - GitHub 認証状態を確認
   - 対象タスクの状態が`Dev`であることを確認

2. **機能ブランチの作成・切り替え**

   - ブランチ名: `feature/implement-{Issue ID}`に切り替え。

3. **設計ドキュメント確認と実装**

   - 実装指示を受け取った場合はその指示に基づき下記を実行。実装指示がない場合は PR レビューファイル`tasks/pr/{Issue ID}_{type}_review.md`を参照
   - [ultrathink]詳細設計し、実装を修正
     - プロジェクト規約に従った実装
     - ソースファイルの作成・修正
     - テストコードの作成
       - デグレがないようにテストを作成して機能が動作することを担保
     - ドキュメント更新

4. **テスト実行と品質チェック**

   - プロジェクトに応じたテストコマンドを実行
   - lint、型チェック等の品質チェック実行
   - テスト結果を確認してから次のステップへ

5. **変更のコミット**

   - 不要なファイル（履歴ファイル等）は除外
   - コミットメッセージは変更内容がわかるように作成
   - ローカルコミットのみ（プッシュしない）

6. **PR 関連ファイル作成/更新**

   - `tasks/pr/commits`ディレクトリがなければ作成
   - 今回の実装の差分の要約を`tasks/pr/{Issue_ID}_commits/{YYYYMMDDHHMMSS}.md`に記録する（commit の差分を記載する）:
     - コミットの差分を要約してわかりやすく日本語で記載する。コードの差分を全て記載する必要はない。

7. **タスクステータス更新**

   - YAML ファイルを更新:
     - `updatedAt`を現在時刻に更新
     - `implementation`情報（ブランチ、コミット）を追加

8. **完了ログ出力**

   - ブランチ名とコミット状況を表示
   - 次のステップ（5-update-pr.md）への案内
